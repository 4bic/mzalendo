{% extends 'south_africa/latlon_detail_base_view.html' %}
{% load compressed %}

{% block title %}{{ object.name }} - Local Politicians{% endblock %}

{% block extra_js_to_load %}
    addExtraJS([ {% compressed_js 'tabs' %} null ]);
{% endblock %}

{% block subcontent %}

<div class="tabs ui-tabs ui-widget">
  <ul class="rep-locator-tabs ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header">
    <!-- TODO: correctly pluralize these nouns -->
    <li class="ui-state-default">
      <a href="#mps" class="ui-tabs-anchor active">{{ mp_mpl_data | length }} MPs and MPLs</a>
    </li>
    <li class="ui-state-default">
      <a href="#councillors" class="ui-tabs-anchor">{{ ward_data | length }} Ward Councillor</a>
    </li>
  </ul>

  <!-- TODO: Map should show ward close-up when councillor tab is selected -->
  {% compressed_js 'google-map' %}
  <div id="map_canvas" style="width: 100%; height: 400px;"></div>

  <div id="mps" class="tab-content ui-tabs-panel ui-widget-content">

    <ul class="unstyled-list list-of-constituency-offices">
      {% for person_data in mp_mpl_data %}
        {% include 'south_africa/local_rep_list_item.html' with skip_positions=0 %}
      {% empty %}
        <li>No MPs or MPLs found.</li>
      {% endfor %}
    </ul>

  </div>
  <div id="councillors" class="tab-content ui-tabs-panel ui-widget-content">

    <ul class="unstyled-list list-of-constituency-offices">
      {% for ward_councillor in ward_data %}
        {% include 'south_africa/local_rep_list_item.html' with person_data=ward_councillor %}
      {% empty %}
        <li>No ward councillor found.</li>
      {% endfor %}
    </ul>

  </div>
</div>

{% endblock %}
