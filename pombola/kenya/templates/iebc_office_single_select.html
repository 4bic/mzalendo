{% extends 'base.html' %}
{% load pipeline %}

{% block css_headers %}
  {{ block.super }}
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
{% endblock %}

{% block js_end_of_body %}
  {{ block.super }}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
  <script>
    $('#id_area').select2(
      {
        placeholder: 'Constituency',
        allowClear: true,
        width: '100%'
      }
    );
    $('#id_area').on("select2:select", function(e) {
      $('.iebc-office-lookup form').submit();
    });
  </script>
{% endblock %}

{% block content %}

<div class="iebc-office-lookup">

  <h1>IEBC Office Locator</h1>

  <p>Type part of your constituency name and select it from the list:</p>

  <form method="GET" action="{% url 'iebc-office' %}">
    {{ form.area }}
    <input type="submit" value="Show office details"/>
  </form>

</div>

{% endblock content %}
