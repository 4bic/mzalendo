{% extends 'search/search_base.html' %}

{% block search_results %}

  {% if top_hits %}
    <div class="top-hits-results">
      <h2>Top Hits</h2>
      <ul class="unstyled-list">
      {% for result in top_hits %}
        {% if result.app_label == 'speeches' %}
          {% include 'search/speech_item.html' %}
        {% elif result.app_label == 'hansard' %}
          {% include 'search/hansard_item.html' %}
        {% else %}
          {% include 'core/generic_list_item.html' with object=result.object %}
        {% endif %}
      {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% for section_results in results %}
    {% if section_results.results_count %}
      <div class="search-{{ section_results.section_dashes }}-results">
        <h2>{{ section_results.title }}</h2>
        <ul class="unstyled-list">
          {% for result in section_results.results|slice:":5" %}
            {% if result.app_label == 'speeches' %}
              {% include 'search/speech_item.html' %}
            {% elif result.app_label == 'hansard' %}
              {% include 'search/hansard_item.html' %}
            {% else %}
              {% include 'core/generic_list_item.html' with object=result.object %}
            {% endif %}
          {% endfor %}
        </ul>

        {% if section_results.results_count > 5 %}
          <p>
            <a href="{% url 'core_search' %}?q={{ query|urlencode }}&section={{ section_results.section }}">Show more matching {{ section_results.title|lower }} ({{ section_results.results_count }} in total)</a>
          </p>
        {% endif %}

      </div>
    {% endif %}
  {% endfor %}

{% endblock %}
